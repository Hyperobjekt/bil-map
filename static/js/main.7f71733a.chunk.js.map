{"version":3,"sources":["CardDock.js","Legend.js","Tooltip.js","App.js","index.js"],"names":["PROPERTY_LIST","EXPANDIBLE_LIST","CardDock","props","state","minimized","expandedProperties","removeCard","bind","slideDock","minimizeDock","toggleProperty","id","this","e","deltaY","setState","property","expanded","cardData","map","card","key","expid","className","name","onClick","expandible","includes","expandIcon","cellClass","valueClass","propertyCells","split","ltr","toLowerCase","join","convertProperty","classes","onWheel","onDoubleClick","getNames","getRows","React","PureComponent","Legend","toggleExpand","Component","Tooltip","location","x","y","style","left","top","mapboxgl","accessToken","process","load","String","prototype","startsWith","Object","defineProperty","value","search","rawPos","pos","substring","length","experimentsData","type","features","experimentsReq","XMLHttpRequest","addEventListener","source","req","rows","JSON","parse","responseText","feed","entry","properties","keys","filter","p","endsWith","substr","items","r","ri","row","forEach","$t","indexOf","geometry","coordinates","longitude","latitude","getSource","setData","reqHandler","open","send","App","lat","lng","zoom","hovered","selectedIds","getCardDock","Map","container","mapContainer","styleData","center","on","getCenter","toFixed","getZoom","featuresOnClick","featuresOnHover","featuresOnUnhover","call","idx","alreadySelected","splice","console","log","push","setFeatureState","selected","getCanvas","cursor","point","hover","_data","find","f","ref","el","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.7f71733a.chunk.js","sourcesContent":["import React from 'react';\n// import { useTransition, animated } from 'react-spring'\n\nconst PROPERTY_LIST = [\n  'Implementation Dates',\n  'Location',\n  'Number of Recipients',\n  'Implementing Agency',\n  'Research Agency',\n  'Funding Agency',\n  'Type of Targeting',\n  'Unit of Recipient',\n  'Amount of Transfer',\n  'Frequency of Payment',\n  'Method of Evaluation',\n  'Additional Notes of Interest',\n  'Link to Website',\n  'Links to Related Resources'\n];\n\nconst EXPANDIBLE_LIST = [\n  'Location',\n  'Implementing Agency',\n  'Research Agency',\n  'Funding Agency',\n  'Type of Targeting',\n  'Amount of Transfer',\n  'Additional Notes of Interest',\n  'Link to Website',\n  'Links to Related Resources'\n];\n\n\n// TODO: make more robust (stab)\nconst convertProperty = property => {\n  return property.split('').map(ltr => {\n    if (ltr === ' ') {\n      return '';\n    } else {\n      return ltr.toLowerCase();\n    }\n  }).join('');\n}\n\n// pure component? (shallow compare map features?) (perf)\nclass CardDock extends React.PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = { minimized: true, expandedProperties: {} };\n\n    this.removeCard = this.removeCard.bind(this);\n    this.slideDock = this.slideDock.bind(this);\n    this.minimizeDock = this.minimizeDock.bind(this);\n    this.toggleProperty = this.toggleProperty.bind(this);\n  }\n\n  removeCard(id) {\n    this.props.removeCard(id);\n  }\n\n  slideDock(e) {\n    if (e.deltaY && e.deltaY > 0) {\n      this.setState({ minimized: false });\n    }\n  }\n\n  minimizeDock() {\n    // TODO: call toggle? or remove, make only scroll-controlled\n    this.setState(state => ({ minimized: !this.state.minimized }));\n  }\n\n  toggleProperty(property, expanded) {\n    const expandedProperties = {...this.state.expandedProperties};\n    expandedProperties[property] = !expanded;\n    this.setState({ expandedProperties });\n  }\n\n  getNames() {\n    // TODO: don't bind in render (perf)\n    return this.props.cardData.map(card => (\n      <td key={'name'+card.expid} className='name'>\n        {card.name||'(none)'}\n        <p onClick={this.removeCard.bind(this, card.expid)} className='remove'>âœ•</p>\n      </td>\n    ));\n  }\n\n  getRows() {\n    return PROPERTY_LIST.map(property => {\n      const expandible = EXPANDIBLE_LIST.includes(property);\n      const expanded = !!this.state.expandedProperties[property];\n\n      let expandIcon = null;\n      if (expandible) {\n        // TODO: also don't bind in render (perf)\n        expandIcon = (\n          <p\n            onClick={this.toggleProperty.bind(this, property, expanded)}\n            className='expand-icon'\n          >\n            {expanded ? '-' : '+'}\n          </p>\n        );\n      }\n\n      let cellClass = 'property-cell';\n      if (expandible) {\n        cellClass += ' expandible';\n      }\n  \n      let valueClass = 'property-value';\n      if (expanded) {\n        valueClass += ' expanded';\n      }\n\n      const propertyCells = this.props.cardData.map(card => (\n        <td className={cellClass} key={property+'-td-'+card.expid}>\n          <div className='property-name'>{property}{expandIcon}</div>\n          <p className={valueClass}>{card[convertProperty(property)]||'(none)'}</p>\n        </td>\n      ));\n      return <tr className='property-row' key={property}>{propertyCells}</tr>;\n    });\n  }\n    \n  render() {\n    let classes = 'card-dock';\n    if (!this.state.minimized) {\n      classes += ' maximized';\n    }\n\n    return (\n      <div onWheel={this.slideDock} onDoubleClick={this.minimizeDock}>\n        <table className={classes}>\n          <thead>\n            <tr>{this.getNames()}</tr>\n          </thead>\n          <tbody>\n            {this.getRows()}\n          </tbody>\n        </table>\n      </div>\n    )\n  }\n}\n\nexport default CardDock;\n","import React from 'react';\n\nclass Legend extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = { expanded: true };\n\n    this.toggleExpand = this.toggleExpand.bind(this);\n  }\n\n  toggleExpand() {\n    this.setState(state => ({ expanded: !state.expanded }));\n  }\n\n  render() {\n    let classes = 'legend';\n    if (!this.state.expanded) {\n      classes += ' hidden';\n    }\n    return (\n      <div className={classes}>\n          <p onClick={this.toggleExpand} className='expand-icon'>[{this.state.expanded ? '-' : '+'}]</p>\n          <div className='content'>\n            <div><i className='past' />Past Experiments</div>\n            <div><i className='ongoing' />Ongoing Experiments</div>\n            <div><i className='proposed' />Proposed Experiments</div>\n          </div>\n      </div>\n    )\n  }\n}\n\nexport default Legend;\n","import React from 'react';\n\nclass Tooltip extends React.Component {\n  render() {\n    const { id, name, location, x, y } = this.props;\n    if (!id) return null;\n\n    return (\n      <div className='tooltip' style={{left: x+'px', top: y+5+'px'}}>\n        <div className='name'>{name||'(none)'}</div>\n        <div className='detail'>\n          <p className='location'>Location:</p>\n          {location}\n        </div>\n        <p className='click-hint'>click point for more info</p>\n      </div>\n    )\n  }\n}\n\nexport default Tooltip;\n","import CardDock from './CardDock';\nimport Legend from './Legend';\nimport React from 'react';\nimport Tooltip from './Tooltip';\nimport mapboxgl from 'mapbox-gl';\nimport styleData from './style.json';\nimport './App.css';\n\nmapboxgl.accessToken = process.env.REACT_APP_MAPBOX_TOKEN;\nconst MAX_SELECTED_POINTS = 3;\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      lat: 40.66995747013945,\n      lng: -103.59179687498357,\n      zoom: 3,\n      hovered: {},\n      selectedIds: []\n    };\n\n    this.map = null;\n    this.getCardDock = this.getCardDock.bind(this);\n    this.removeCard = this.removeCard.bind(this);\n  }\n  \n  componentDidMount() {\n    this.map = new mapboxgl.Map({\n      container: this.mapContainer,\n      style: styleData,\n      center: [this.state.lng, this.state.lat],\n      zoom: this.state.zoom,\n    });\n    \n    this.map.on('move', () => {\n      this.setState({\n        lng: this.map.getCenter().lng.toFixed(4),\n        lat: this.map.getCenter().lat.toFixed(4),\n        zoom: this.map.getZoom().toFixed(2)\n      });\n    });\n\n    this.map.on('click', 'experimentSites', this.featuresOnClick.bind(this));\n    this.map.on('mouseenter', 'experimentSites', this.featuresOnHover.bind(this));\n    this.map.on('mouseleave', 'experimentSites', this.featuresOnUnhover.bind(this));\n\n    load.call(this); \n  }\n\n  featuresOnClick(e) {\n    const { id } = e.features[0];\n    const selectedIds = [...this.state.selectedIds];\n    const idx = selectedIds.indexOf(id);\n    const alreadySelected = idx > -1;\n\n    if (!alreadySelected) {\n      if (selectedIds.length >= MAX_SELECTED_POINTS) {\n        console.log('OH SHET!');\n        // warn user\n        return;\n      } else {\n        selectedIds.push(id);\n      }\n    } else {\n      selectedIds.splice(idx, 1);\n    }\n\n    this.setState({ selectedIds });\n    this.map.setFeatureState({\n        source: 'experiments',\n        id\n      }, { selected: !alreadySelected }\n    );\n  }\n\n  featuresOnHover(e) {\n    this.map.getCanvas().style.cursor = 'pointer';\n    const { id, properties } = e.features[0];\n    const { name, location } = properties;\n    const { x, y } = e.point;\n    this.setState({ hovered: { id, name, location, x, y } });\n    this.map.setFeatureState({\n        source: 'experiments',\n        id\n      }, { hover: true }\n    );\n  }\n\n  featuresOnUnhover() {\n    this.map.getCanvas().style.cursor = '';\n    this.map.setFeatureState({\n        source: 'experiments',\n        id: this.state.hovered.id\n      }, { hover: false }\n    );\n\n    this.setState({ hovered: {} });\n  }\n\n  removeCard(id) {\n    const selectedIds = [...this.state.selectedIds];\n    const idx = selectedIds.indexOf(id);\n    selectedIds.splice(idx, 1);\n\n    this.setState({ selectedIds });\n    this.map.setFeatureState({\n        source: 'experiments',\n        id\n      }, { selected: false }\n    );\n  }\n\n  getCardDock() {\n    if (!this.map || !this.state.selectedIds.length) {\n      return null;\n    }\n    const { features } = this.map.getSource('experiments')._data;\n    const cardData = this.state.selectedIds.map(id => {\n      return features.find(f => f.id === id).properties;\n    });\n\n    return <CardDock removeCard={this.removeCard} cardData={cardData} />\n  }\n  \n  render() {\n    return (\n      <div className='app'>\n        {this.getCardDock()}\n        <div ref={el => this.mapContainer = el} className='map-container' />\n        <Tooltip {...this.state.hovered} />\n        <Legend />\n      </div>\n    )\n  }\n}\n\nfunction load () {\n  // startsWith polyfill\n  if (!String.prototype.startsWith) {\n    Object.defineProperty(String.prototype, 'startsWith', {\n        value: function(search, rawPos) {\n            var pos = rawPos > 0 ? rawPos|0 : 0;\n            return this.substring(pos, pos + search.length) === search;\n        }\n    });\n  }\n\n  var experimentsData = { type: 'FeatureCollection', features: [] };\n\n  const reqHandler = (source, req) => {\n    var rows = JSON.parse(req.responseText).feed.entry;\n    var properties = Object.keys(rows[0])\n      .filter(function (p) { \n        return p.startsWith('gsx$') & !p.endsWith('_db1zf');\n      })\n      .map(function (p) { return p.substr(4); });\n    \n    var items = rows.map(function (r, ri) {\n      var row = {};\n      properties.forEach(function (p) {\n        row[p] = r['gsx$' + p].$t === '' ? null : r['gsx$' + p].$t;\n        // mapbox wants numeric lat/long, and coerces id to num (so avoid type error headache)\n        if (['latitude', 'longitude', 'expid', 'uid'].indexOf(p) !== -1) {\n          row[p] = +row[p];\n        }\n        if (row[p] === null) {\n          row[p] = '';\n        }\n      });\n      return {\n        type: 'Feature',\n        id: row.expid,\n        geometry: {\n          type: 'Point',\n          coordinates: [row.longitude, row.latitude]\n        },\n        properties: row\n      };\n    });\n\n    experimentsData = { type: 'FeatureCollection', features: items };\n    this.map.getSource('experiments').setData(experimentsData);\n  }\n\n  // Fetch Local Article Data\n  var experimentsReq = new XMLHttpRequest();\n  experimentsReq.addEventListener('load',  () => { reqHandler('experiments', experimentsReq) });\n  experimentsReq.open('GET', process.env.REACT_APP_SHEET_URL);\n  experimentsReq.send();\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n// serviceWorker.unregister();\n"],"sourceRoot":""}