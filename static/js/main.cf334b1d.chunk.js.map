{"version":3,"sources":["TriggerIcon.js","fields.js","ScrollHint.js","CardDock.js","Legend.js","Tooltip.js","App.js","index.js"],"names":["ICON_TYPE","TriggerIcon","props","this","onClick","x1","x2","y1","y2","icon","points","classes","iconType","getRemove","getExpand","getCollapse","console","error","inBrackets","getBracketWrap","viewBox","className","React","Component","SHEET_FIELDS","LONGITUDE","displayName","sheetId","LATITUDE","EID","NAME","TYPE","LOCATION","DATES","RECIPIENTS","IMPLEMENTER","isExpandible","RESEARCHER","FUNDER","TARGETING","UNIT","AMOUNT","FREQUENCY","EVALUATION","NOTES","WEBSITE","forceUniformValue","LINKURL1","LINKTITLE1","LINKURL2","LINKTITLE2","LINKURL3","LINKTITLE3","LINKURL4","LINKTITLE4","LINKURL5","LINKTITLE5","LINKURL6","LINKTITLE6","LINK_FIELD_PAIRS","urlField","titleField","FEATURE_HEADERS","ORGANIZATIONAL","isFeatureHeader","IMPLEMENTATION","COMPOSITE_FIELDS","RELATED_RESOURCES","ORDERED_CARD_FIELDS","ScrollHint","dismissed","CardDock","state","minimized","expandedProperties","scrollHintDismissed","removeCard","bind","slideDock","toggleDock","maximizeDock","toggleProperty","id","e","deltaY","setState","property","expanded","cardData","map","experimentCardSet","eid","name","key","field","expandible","getIsExpandible","expandIcon","cellClass","valueClass","propertyCells","cellContent","getCellContent","_","some","expCardSet","length","getLocationCellContent","getLinksContent","locationOneData","otherLocationsData","firstValue","uniformValue","every","l","includes","href","target","locationData","location","title","linkMap","orderedLinks","forEach","urlValue","titleValue","push","onWheel","onDoubleClick","onTouchStart","getNames","getRows","PureComponent","Legend","toggleExpand","Tooltip","left","top","adjusted","ref","createRef","nextProps","expId","x","y","adjustPosition","current","getBoundingClientRect","tooltipWidth","width","tooltipHeight","height","document","getElementById","windowWidth","windowHeight","POINT_BUFFER","otherLocations","hoveredClass","otherLocationElements","type","style","visibility","getLocations","mapboxgl","accessToken","process","App","lat","lng","zoom","hovered","selectedIds","isTouchScreen","getCardDock","getTooltip","getFeaturesByExperimentId","Map","container","mapContainer","styleData","center","on","featuresOnUnhover","getCenter","toFixed","getZoom","featuresOnClick","featuresOnHover","touchstart","load","call","getSource","_data","features","filter","f","properties","idx","indexOf","alreadySelected","splice","log","setFeatureState","source","selected","getCanvas","cursor","point","hover","el","nextEidNumber","eidMap","String","prototype","startsWith","Object","defineProperty","value","search","rawPos","pos","substring","experimentsData","experimentsReq","XMLHttpRequest","addEventListener","req","JSON","parse","responseText","feed","entry","rows","keys","p","endsWith","substr","items","r","ri","row","$t","stringEid","numericEid","toLowerCase","geometry","coordinates","setData","reqHandler","open","send","ReactDOM","render"],"mappings":"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","file":"static/js/main.cf334b1d.chunk.js","sourcesContent":["import React from 'react';\n\nconst ICON_TYPE = {\n  REMOVE: 'remove',\n  EXPAND: 'expand',\n  COLLAPSE: 'collapse'\n};\n\nclass TriggerIcon extends React.Component {\n  constructor(props) {\n    super(props)\n  }\n\n  onClick() {\n    this.props.onClick();\n  }\n\n  getRemove() {\n    return (\n      <>\n        <line x1='15' x2='85' y1='15' y2='85'/>\n        <line x1='15' x2='85' y1='85' y2='15'/>\n      </>\n    )    \n  }\n  \n  getExpand() {\n    return (\n      <>\n        <line x1='15' x2='85' y1='50' y2='50'/>\n        <line x1='50' x2='50' y1='15' y2='85'/>\n      </>\n    )    \n  }\n\n  getCollapse() {\n    return (\n      <>\n        <line x1='20' x2='80' y1='50' y2='50'/>\n      </>\n    )    \n  }\n  \n  getBracketWrap(icon) {\n    return (\n      <>\n        <polyline points='15,0 0,0 0,100 15,100'   />\n          {icon}\n        <polyline points='85,0 100,0 100,100 85,100'   />\n      </>\n    )    \n  }\n  \n  render() {\n    let icon;\n    let classes = 'trigger-icon ';\n    switch (this.props.iconType) {\n      case ICON_TYPE.REMOVE:\n        icon = this.getRemove();\n        classes += 'remove-icon';\n        break;\n      case ICON_TYPE.EXPAND:\n        icon = this.getExpand();\n        classes += 'expand-icon';\n        break;\n      case ICON_TYPE.COLLAPSE:\n        icon = this.getCollapse();\n        classes += 'collapse-icon';\n        break;\n      default:\n        console.error('incorrect type');\n    }\n\n    if (this.props.inBrackets) {\n      icon = this.getBracketWrap(icon);\n    }\n\n    return (\n      <svg onClick={this.props.onClick} viewBox='0 0 100 100' className={classes}>\n        {icon}\n      </svg>\n    )\n  }\n}\n\nexport default TriggerIcon;\nexport { ICON_TYPE };\n","const SHEET_FIELDS = {\n  LONGITUDE: {\n    displayName: 'Longitude', // how the field will appear on the card\n    sheetId: 'longitude' // corresponds to the column header on the google sheet\n  },\n  LATITUDE: {\n    displayName: 'Latitude',\n    sheetId: 'latitude'\n  },\n  // NOTE: Used to bind the different locations of a given experiment together.\n  // We use it as the mapbox ID for the feature to simplify unified hover/selection styling.\n  EID: {\n    displayName: 'Experiment ID',\n    sheetId: 'eid'\n  },\n  NAME: {\n    displayName: 'Name of Experiment',\n    sheetId: 'name'\n  },\n  TYPE: {\n    displayName: 'Past, Ongoing, Proposed',\n    sheetId: 'type'\n  },\n  LOCATION: {\n    displayName: 'Location',\n    sheetId: 'location'\n  },\n  DATES: {\n    displayName: 'Implementation Dates',\n    sheetId: 'dates'\n  },\n  RECIPIENTS: {\n    displayName: 'Number of Recipients',\n    sheetId: 'recipients'\n  },\n  IMPLEMENTER: {\n    displayName: 'Implementing Agency',\n    sheetId: 'implementer',\n    isExpandible: true\n  },\n  RESEARCHER: {\n    displayName: 'Research Agency',\n    sheetId: 'researcher',\n    isExpandible: true\n  },\n  FUNDER: {\n    displayName: 'Funding Agency',\n    sheetId: 'funder',\n    isExpandible: true\n  },\n  TARGETING: {\n    displayName: 'Type of Targeting',\n    sheetId: 'targeting',\n    isExpandible: true\n  },\n  UNIT: {\n    displayName: 'Unit of Recipient',\n    sheetId: 'unit'\n  },\n  AMOUNT: {\n    displayName: 'Amount of Transfer',\n    sheetId: 'amount',\n    isExpandible: true\n  },\n  FREQUENCY: {\n    displayName: 'Frequency of Payment',\n    sheetId: 'frequency'\n  },\n  EVALUATION: {\n    displayName: 'Method of Evaluation',\n    sheetId: 'evaluation'\n  },\n  NOTES: {\n    displayName: 'Additional Notes of Interest',\n    sheetId: 'notes',\n    isExpandible: true\n  },\n  WEBSITE: {\n    displayName: 'Link to Website',\n    sheetId: 'website',\n    forceUniformValue: true\n  },\n  LINKURL1: {\n    displayName: 'Link to Related Resource 1',\n    sheetId: 'linkurl1'\n  },\n  LINKTITLE1: {\n    displayName: 'Link title 1',\n    sheetId: 'linktitle1'\n  },\n  LINKURL2: {\n    displayName: 'Link to Related Resource 2',\n    sheetId: 'linkurl2'\n  },\n  LINKTITLE2: {\n    displayName: 'Link title 2',\n    sheetId: 'linktitle2'\n  },\n  LINKURL3: {\n    displayName: 'Link to Related Resource 3',\n    sheetId: 'linkurl3'\n  },\n  LINKTITLE3: {\n    displayName: 'Link title 3',\n    sheetId: 'linktitle3'\n  },\n  LINKURL4: {\n    displayName: 'Link to Related Resource 4',\n    sheetId: 'linkurl4'\n  },\n  LINKTITLE4: {\n    displayName: 'Link title 4',\n    sheetId: 'linktitle4'\n  },\n  LINKURL5: {\n    displayName: 'Link to Related Resource 5',\n    sheetId: 'linkurl5'\n  },\n  LINKTITLE5: {\n    displayName: 'Link title 5',\n    sheetId: 'linktitle5'\n  },\n  LINKURL6: {\n    displayName: 'Link to Related Resource 6',\n    sheetId: 'linkurl6'\n  },\n  LINKTITLE6: {\n    displayName: 'Link title 6',\n    sheetId: 'linktitle6'\n  }\n};\n\nconst LINK_FIELD_PAIRS = [\n  { urlField: SHEET_FIELDS.LINKURL1, titleField: SHEET_FIELDS.LINKTITLE1 },\n  { urlField: SHEET_FIELDS.LINKURL2, titleField: SHEET_FIELDS.LINKTITLE2 },\n  { urlField: SHEET_FIELDS.LINKURL3, titleField: SHEET_FIELDS.LINKTITLE3 },\n  { urlField: SHEET_FIELDS.LINKURL4, titleField: SHEET_FIELDS.LINKTITLE4 },\n  { urlField: SHEET_FIELDS.LINKURL5, titleField: SHEET_FIELDS.LINKTITLE5 },\n  { urlField: SHEET_FIELDS.LINKURL6, titleField: SHEET_FIELDS.LINKTITLE6 },\n];\n\nconst FEATURE_HEADERS = {\n  ORGANIZATIONAL: {\n    displayName: 'ORGANIZATIONAL FEATURES',\n    sheetId: null,\n    isFeatureHeader: true\n  },\n  IMPLEMENTATION: {\n    displayName: 'IMPLEMENTATION FEATURES',\n    sheetId: null,\n    isFeatureHeader: true\n  },\n};\n\nconst COMPOSITE_FIELDS = {\n  RELATED_RESOURCES: {\n    displayName: 'Links to Related Resources',\n    sheetId: null,\n    isExpandible: true,\n    // composite: true\n  }\n};\n\nconst ORDERED_CARD_FIELDS = [\n  // SHEET_FIELDS.LONGITUDE,\n  // SHEET_FIELDS.LATITUDE,\n  // SHEET_FIELDS.EID,\n  // SHEET_FIELDS.NAME,\n  // SHEET_FIELDS.TYPE,\n  SHEET_FIELDS.LOCATION,\n  SHEET_FIELDS.DATES,\n  SHEET_FIELDS.RECIPIENTS,\n  FEATURE_HEADERS.ORGANIZATIONAL,\n  SHEET_FIELDS.IMPLEMENTER,\n  SHEET_FIELDS.RESEARCHER,\n  SHEET_FIELDS.FUNDER,\n  FEATURE_HEADERS.IMPLEMENTATION,\n  SHEET_FIELDS.TARGETING,\n  SHEET_FIELDS.UNIT,\n  SHEET_FIELDS.AMOUNT,\n  SHEET_FIELDS.FREQUENCY,\n  SHEET_FIELDS.EVALUATION,\n  SHEET_FIELDS.NOTES,\n  SHEET_FIELDS.WEBSITE,\n  COMPOSITE_FIELDS.RELATED_RESOURCES\n  // SHEET_FIELDS.LINKURL1,\n  // SHEET_FIELDS.LINKTITLE1,\n  // SHEET_FIELDS.LINKURL2,\n  // SHEET_FIELDS.LINKTITLE2,\n  // SHEET_FIELDS.LINKURL3,\n  // SHEET_FIELDS.LINKTITLE3,\n  // SHEET_FIELDS.LINKURL4,\n  // SHEET_FIELDS.LINKTITLE4,\n  // SHEET_FIELDS.LINKURL5,\n  // SHEET_FIELDS.LINKTITLE5,\n  // SHEET_FIELDS.LINKURL6,\n  // SHEET_FIELDS.LINKTITLE6\n];\n\nexport { SHEET_FIELDS, FEATURE_HEADERS, COMPOSITE_FIELDS, ORDERED_CARD_FIELDS, LINK_FIELD_PAIRS };","import React from 'react';\nimport TriggerIcon, { ICON_TYPE } from './TriggerIcon';\n\nclass ScrollHint extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    let classes = 'scroll-hint';\n    if (this.props.dismissed) {\n      classes += ' dismissed';\n    }\n\n    return (\n      <div className={classes}>\n        <p className='content'>SCROLL FOR MORE ⬇️</p>\n      </div>\n    )\n  }\n}\n\nexport default ScrollHint;\n","import React from 'react';\nimport _ from 'lodash';\nimport TriggerIcon, { ICON_TYPE } from './TriggerIcon';\nimport { SHEET_FIELDS, ORDERED_CARD_FIELDS, COMPOSITE_FIELDS, LINK_FIELD_PAIRS } from './fields';\nimport ScrollHint from './ScrollHint';\n\nconst { LOCATION, NAME, EID, TYPE, WEBSITE } = SHEET_FIELDS;\n\n// pure component? (shallow compare map features?) (perf)\nclass CardDock extends React.PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = { minimized: true, expandedProperties: {}, scrollHintDismissed: false };\n\n    this.removeCard = this.removeCard.bind(this);\n    this.slideDock = this.slideDock.bind(this);\n    this.toggleDock = this.toggleDock.bind(this);\n    this.maximizeDock = this.maximizeDock.bind(this);\n    this.toggleProperty = this.toggleProperty.bind(this);\n  }\n\n  removeCard(id) {\n    this.props.removeCard(id);\n  }\n\n  slideDock(e) {\n    if (e.deltaY && e.deltaY > 0) {\n      this.setState({ minimized: false });\n    }\n  }\n\n  toggleDock() {\n    // TODO: call toggle? or remove, make only scroll-controlled\n    this.setState(state => ({ minimized: !this.state.minimized }));\n  }\n\n  maximizeDock() {\n    // TODO: call toggle? or remove, make only scroll-controlled\n    this.setState(state => ({ minimized: false }));\n  }\n\n  toggleProperty(property, expanded) {\n    const expandedProperties = {...this.state.expandedProperties};\n    expandedProperties[property] = !expanded;\n    this.setState({ expandedProperties });\n  }\n\n  getNames() {\n    // TODO: don't bind in render (perf)\n    return this.props.cardData.map(experimentCardSet => {\n      const {\n        [EID.sheetId]: eid,\n        [NAME.sheetId]: name,\n        [TYPE.sheetId]: type\n      } = experimentCardSet[0];\n      const classes = 'name ' + type;\n      return (\n        <td key={'name'+eid} className={classes}>\n          {name||'(none)'}\n          <TriggerIcon iconType={ICON_TYPE.REMOVE} onClick={this.removeCard.bind(this, eid)} />\n        </td>\n    )});\n  }\n\n  getRows() {\n    return ORDERED_CARD_FIELDS.map(field => {\n      const { displayName, sheetId, isFeatureHeader } = field;\n\n      const expandible = this.getIsExpandible(field);\n\n      const expanded = !!this.state.expandedProperties[field.sheetId];\n\n      let expandIcon = null;\n      if (expandible) {\n        // TODO: also don't bind in render (perf)\n        const iconType = expanded ? ICON_TYPE.COLLAPSE : ICON_TYPE.EXPAND;\n        expandIcon = (\n          <TriggerIcon\n            onClick={this.toggleProperty.bind(this, field.sheetId, expanded)}\n            iconType={iconType}\n          />\n        );\n      }\n\n      let cellClass = 'property-cell';\n      if (expandible) {\n        cellClass += ' expandible';\n      }\n      if (isFeatureHeader) {\n        cellClass += ' feature-header';\n      }\n  \n      let valueClass = 'property-value';\n      if (expanded) {\n        valueClass += ' expanded';\n      }\n\n      const propertyCells = this.props.cardData.map(experimentCardSet => {\n        \n        const cellContent = this.getCellContent(experimentCardSet, field);\n        const { [EID.sheetId]: eid } = experimentCardSet[0];\n        return (\n          <td className={cellClass} key={displayName+'-td-'+eid}>\n            <div className='property-name'>{displayName}{expandIcon}</div>\n            <div className={valueClass}>{cellContent}</div>\n          </td>\n      )});\n      return <tr className='property-row' key={displayName}>{propertyCells}</tr>;\n    });\n  }\n\n  getIsExpandible(field) {\n    // 1) not expandible => F 2) has multiple locations w/diff values => T 3) sole value > 40Ms\n    if (field === LOCATION) {\n      // if any experimint in the card dock has multiple locations, the cell should be expandible\n      return _.some(this.props.cardData, expCardSet => expCardSet.length > 1);\n    }\n    return field.isExpandible;\n  }\n\n  getCellContent(experimentCardSet, field) {\n    if (field === LOCATION) {\n      return this.getLocationCellContent(experimentCardSet);\n    } else if (field.isFeatureHeader) {\n      return null;\n    } else if (field === COMPOSITE_FIELDS.RELATED_RESOURCES) {\n      return this.getLinksContent(experimentCardSet);\n    }\n\n    const { sheetId } = field;\n    const [locationOneData, ...otherLocationsData] = experimentCardSet;\n    const firstValue = locationOneData[sheetId];\n    const uniformValue = field.forceUniformValue || _.every(otherLocationsData, l => l[sheetId] === firstValue);\n    \n    let cellContent;\n    if (field === WEBSITE && firstValue.includes('.')) {\n      cellContent = <a href={firstValue} target=\"_blank\">{firstValue}</a>;\n    } else if (uniformValue) {\n      cellContent = firstValue;\n    } else {\n      // break cell into block for each location, as they have different values\n      cellContent = experimentCardSet.map(locationData => {\n        const {\n          [EID.sheetId]: eid,\n          [LOCATION.sheetId]: location,\n        } = locationData;\n        return (\n          <div key={`cell-content-${sheetId}-${eid}-${location}`}>\n            <div \n              title={location}\n              className='property-location-title'\n            >\n              {location}\n            </div>\n            {locationData[sheetId]}\n          </div>\n        )\n      })\n    }\n\n    return <>{cellContent}</>;\n  }\n\n  getLocationCellContent(experimentCardSet) {\n    const cellContent = experimentCardSet.map(locationData => {\n      const {\n        [EID.sheetId]: eid,\n        [LOCATION.sheetId]: location,\n      } = locationData;\n      return (\n        <div \n          title={location}\n          className='location-cell-content'\n          key={`cell-content-location-${eid}-${location}`}\n        >\n          {location}\n        </div>\n    )});\n    return <>{cellContent}</>;\n  }\n\n  getLinksContent(experimentCardSet) {\n    const linkMap = {};\n    const orderedLinks = [];\n    experimentCardSet.forEach(locationData => {\n      LINK_FIELD_PAIRS.forEach(({ urlField, titleField }) => {\n        const urlValue = locationData[urlField.sheetId];\n        if (urlValue && !linkMap[urlValue]) {\n          linkMap[urlValue] = true;\n          const titleValue = locationData[titleField.sheetId] || urlValue;\n          orderedLinks.push({ urlValue, titleValue });\n        }\n      })\n    });\n    \n    return (\n      <div \n        key={`cell-content-links-${experimentCardSet[0][EID.sheetId]}`}\n      >\n        {orderedLinks.map(({ urlValue, titleValue }) => (\n          <a key={urlValue} href={urlValue} target=\"_blank\">{titleValue}</a>\n        ))}\n      </div>\n    );\n  }\n    \n  render() {\n    let classes = 'card-dock-container ';\n    classes += `card-count-${this.props.cardData.length}`;\n    if (!this.state.minimized) {\n      classes += ' maximized';\n    }\n\n    return (\n      <div\n        onWheel={this.slideDock}\n        onDoubleClick={this.toggleDock}\n        onTouchStart={this.maximizeDock}\n        className={'card-dock-wrapper'}\n      >\n        <div className={classes}>\n          {<ScrollHint dismissed={this.state.scrollHintDismissed} />}\n          <table className=\"card-dock\">\n            <thead>\n              <tr>{this.getNames()}</tr>\n            </thead>\n            <tbody>\n              {this.getRows()}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default CardDock;\n","import React from 'react';\nimport TriggerIcon, { ICON_TYPE } from './TriggerIcon';\n\nclass Legend extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = { expanded: true };\n\n    this.toggleExpand = this.toggleExpand.bind(this);\n  }\n\n  toggleExpand() {\n    this.setState(state => ({ expanded: !state.expanded }));\n  }\n\n  render() {\n    let classes = 'legend';\n    if (!this.state.expanded) {\n      classes += ' hidden';\n    }\n\n    const iconType = this.state.expanded ? ICON_TYPE.COLLAPSE : ICON_TYPE.EXPAND;\n    return (\n      <div className={classes}>\n          <TriggerIcon onClick={this.toggleExpand} inBrackets={true} iconType={iconType} />\n          <div className='content'>\n            <div><i className='past' />Past Experiments</div>\n            <div><i className='ongoing' />Ongoing Experiments</div>\n            <div><i className='proposed' />Proposed Experiments</div>\n          </div>\n      </div>\n    )\n  }\n}\n\nexport default Legend;\n","import React from 'react';\n\nconst POINT_BUFFER = 7;\n\nclass Tooltip extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      left: 0,\n      top: 0,\n      adjusted: false\n    };\n\n    this.ref = React.createRef();\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const { expId } = nextProps;\n    if (this.props.expId === expId || !expId) {\n      // if we're still hovering the same point, don't worry about updating\n      return;\n    }\n\n    // The following steps insure a tooltip doesn't flow outside of the window bounds:\n    // 1] when we hover a new point, we initially render without adjusting the tooltip location\n    this.setState({ \n      adjusted: false,\n      left: nextProps.x,\n      top: nextProps.y\n    });\n  }\n\n  componentDidUpdate() {\n    if (this.state.adjusted || !this.props.expId) {\n      // 6] location has already been adjusted, so don't trigger a rerender\n      return;\n    }\n\n    this.adjustPosition();\n  }\n\n  adjustPosition() {\n    // 3] after the initial render, we have access to the tooltip's DOM node and can tell it's size\n    const { width: tooltipWidth, height: tooltipHeight } = this.ref.current.getBoundingClientRect();\n    const windowElement = document.getElementById('root');\n    const { width: windowWidth, height: windowHeight } = windowElement.getBoundingClientRect();\n    \n    let { left, top } = this.state;\n    // by default, tooltip appears above the point\n    top -= (tooltipHeight + POINT_BUFFER);\n    if (top < 0) {\n      // if it would run off the top of the screen, shift it below the point\n      top += tooltipHeight + POINT_BUFFER*2;\n\n      if ((top + tooltipHeight) > windowHeight) {\n        // ...unless it would then run off the bottom, in which case set it as high as possible\n        top = 1;\n      }\n    }\n\n    left += POINT_BUFFER;\n    if (left + tooltipWidth > windowWidth) {\n      // if the tooltip would run off the right of the screen, shift it left of the point\n      left -= (tooltipWidth + POINT_BUFFER*2);\n\n      if (left < 0) {\n        // ...unless it would then run off the left, in which case set it up against the right border\n        left = windowWidth - (tooltipWidth + 2);\n      }\n    }\n\n    // 4] record our adjusted coordinates, which will trigger a rerender\n    this.setState({ left, top, adjusted: true });\n  }\n  \n  getLocations() {\n    const { location, otherLocations } = this.props;\n    let hoveredClass = 'hovered-location';\n    let otherLocationElements = null;\n\n    if (otherLocations.length) {\n      hoveredClass += ' emphasized';\n      otherLocationElements = otherLocations.map(l => <p key={l}>{l}</p>);\n    }\n\n    return (\n      <>\n        <p className={hoveredClass}>{location}</p>\n        {otherLocationElements}\n      </>\n    )\n  }\n\n  render() {\n    const { expId, name, type } = this.props;\n    if (!expId) {\n      return null;\n    }\n\n    let style = {};\n    if (!this.state.adjusted) {\n      // 2] hide this initial render so user doesn't see tooltip \"jump\"\n      style = { visibility: 'hidden', left: '0px', top: '0px' };\n    } else {\n      // 5] finally, our tooltip can be told where to properly render\n      style = { left: this.state.left + 'px', top: this.state.top + 'px' };\n    }\n\n    const classes = 'tooltip ' + type;\n    return (\n      <div className={classes} style={style} ref={this.ref}>\n        <div className='name'>{name||'(none)'}</div>\n        <div className='detail'>\n          <p className='location-title'>Location:</p>\n          {this.getLocations()}\n        </div>\n        <p className='click-hint'>click point for more info</p>\n      </div>\n    )\n  }\n}\n\nexport default Tooltip;\n","import CardDock from './CardDock';\nimport Legend from './Legend';\nimport React from 'react';\nimport Tooltip from './Tooltip';\nimport mapboxgl from 'mapbox-gl';\nimport _ from 'lodash';\nimport styleData from './style.json';\nimport './App.css';\nimport { SHEET_FIELDS } from './fields';\n\nconst { LONGITUDE, LATITUDE, NAME, LOCATION, TYPE, EID } = SHEET_FIELDS;\n\nmapboxgl.accessToken = process.env.REACT_APP_MAPBOX_TOKEN;\nconst MAX_SELECTED_POINTS = 3;\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      lat: 40.66995747013945,\n      lng: -103.59179687498357,\n      zoom: 3,\n      hovered: {},\n      selectedIds: [],\n      isTouchScreen: false\n    };\n\n    this.map = null;\n    this.getCardDock = this.getCardDock.bind(this);\n    this.getTooltip = this.getTooltip.bind(this);\n    this.removeCard = this.removeCard.bind(this);\n    this.getFeaturesByExperimentId = this.getFeaturesByExperimentId.bind(this);\n  }\n\n  componentDidMount() {\n    this.map = new mapboxgl.Map({\n      container: this.mapContainer,\n      style: styleData,\n      center: [this.state.lng, this.state.lat],\n      zoom: this.state.zoom,\n    });\n    \n    this.map.on('move', () => {\n      this.featuresOnUnhover();\n      this.setState({\n        lng: this.map.getCenter().lng.toFixed(4),\n        lat: this.map.getCenter().lat.toFixed(4),\n        zoom: this.map.getZoom().toFixed(2)\n      });\n    });\n    \n    this.map.on('click', 'experimentSites', this.featuresOnClick.bind(this));\n    this.map.on('mouseenter', 'experimentSites', this.featuresOnHover.bind(this));\n    this.map.on('mouseleave', 'experimentSites', this.featuresOnUnhover.bind(this));\n\n    this.map.on('touchstart', 'experimentSites', this.touchstart.bind(this));\n    \n    load.call(this); \n  }\n  \n  touchstart(e) {\n    this.setState({ isTouchScreen: true });\n  }\n\n  getFeaturesByExperimentId(expId) {\n    const { features } = this.map.getSource('experiments')._data;\n    return features.filter(f => f.id === expId).map(f => f.properties);\n  }\n  \n  featuresOnClick(e) {\n    const { id: expId } = e.features[0];\n    const selectedIds = [...this.state.selectedIds];\n    const idx = selectedIds.indexOf(expId);\n    const alreadySelected = idx > -1;\n\n    if (!alreadySelected) {\n      if (selectedIds.length >= MAX_SELECTED_POINTS) {\n        console.log('OH SHET!');\n        // warn user\n        return;\n      } else {\n        selectedIds.push(expId);\n      }\n    } else {\n      selectedIds.splice(idx, 1);\n    }\n\n    this.setState({ selectedIds });\n    this.map.setFeatureState({\n        source: 'experiments',\n        id: expId\n      }, { selected: !alreadySelected }\n    );\n  }\n\n  featuresOnHover(e) {\n    if (this.state.isTouchScreen) {\n      // devices with touch screens shouldn't have tooltips\n      return;\n    }\n    this.map.getCanvas().style.cursor = 'pointer';\n    const { id: expId, properties } = e.features[0];    \n    const { x, y } = e.point;\n\n    this.setState({ \n      hovered: {\n        name: properties[NAME.sheetId],\n        location: properties[LOCATION.sheetId],\n        type: properties[TYPE.sheetId],\n        expId,\n        x,\n        y \n      }\n    });\n    this.map.setFeatureState({\n        source: 'experiments',\n        id: expId\n      }, { hover: true }\n    );\n  }\n\n  featuresOnUnhover() {\n    if (this.state.isTouchScreen || !this.state.hovered.expId) {\n      return;\n    }\n    this.map.getCanvas().style.cursor = '';\n    this.map.setFeatureState({\n        source: 'experiments',\n        id: this.state.hovered.expId\n      }, { hover: false }\n    );\n\n    this.setState({ hovered: {} });\n  }\n\n  removeCard(expId) {\n    const selectedIds = [...this.state.selectedIds];\n    const idx = selectedIds.indexOf(expId);\n    selectedIds.splice(idx, 1);\n\n    this.setState({ selectedIds });\n    this.map.setFeatureState({\n        source: 'experiments',\n        id: expId\n      }, { selected: false }\n    );\n  }\n\n  getTooltip() {\n    const { expId, name, location, type, x, y } = this.state.hovered;\n    let otherLocations = [];\n    if (expId) {\n      const features = this.getFeaturesByExperimentId(expId);\n      otherLocations = features\n        .map(f => f.location)\n        .filter(l => l !== location);\n    }\n    return <Tooltip expId={expId} name={name} location={location} otherLocations={otherLocations} type={type} x={x} y={y}/>;\n  }\n\n  getCardDock() {\n    if (!this.map || !this.state.selectedIds.length) {\n      return null;\n    }\n\n    const cardData = this.state.selectedIds.map(this.getFeaturesByExperimentId);\n    return <CardDock removeCard={this.removeCard} cardData={cardData} />\n  }\n  \n  render() {\n    return (\n      <div className='app'>\n        {this.getCardDock()}\n        {this.getTooltip()}\n        <div ref={el => this.mapContainer = el} className='map-container' />\n        <Legend />\n      </div>\n    )\n  }\n}\n\nlet nextEidNumber = 0;\nconst eidMap = {};\n\nfunction load () {\n  // startsWith polyfill\n  if (!String.prototype.startsWith) {\n    Object.defineProperty(String.prototype, 'startsWith', {\n        value: function(search, rawPos) {\n            const pos = rawPos > 0 ? rawPos|0 : 0;\n            return this.substring(pos, pos + search.length) === search;\n        }\n    });\n  }\n\n  const experimentsData = { type: 'FeatureCollection', features: [] };\n\n  const reqHandler = (source, req) => {\n    const [ columnHeaderRow, ...rows ] = JSON.parse(req.responseText).feed.entry;\n    const properties = Object.keys(rows[0])\n      .filter(function (p) { \n        return p.startsWith('gsx$') & !p.endsWith('_db1zf');\n      })\n      .map(function (p) { return p.substr(4); });\n    \n    const items = rows.map(function (r, ri) {\n      const row = {};\n      properties.forEach(function (p) {\n        row[p] = r['gsx$' + p].$t === '' ? null : r['gsx$' + p].$t;\n        if ([LATITUDE.sheetId, LONGITUDE.sheetId].indexOf(p) !== -1) {\n          // mapbox wants numeric lat/long\n          row[p] = +row[p];\n        }\n        if (p === EID.sheetId) {\n          // convert the string eids from the sheet into numeric ids (which mapbox expects)\n          const stringEid = row[p];\n          const numericEid = eidMap[stringEid] || nextEidNumber++;\n          eidMap[stringEid] = numericEid;\n          row[p] = numericEid;\n        }\n        if (p === TYPE.sheetId) {\n          // force lower case to simplify equality comparisons\n          row[p] = row[p].toLowerCase();\n        }\n        if (row[p] === null) {\n          row[p] = '';\n        }\n      });\n      return {\n        type: 'Feature',\n        id: row[EID.sheetId],\n        geometry: {\n          type: 'Point',\n          coordinates: [row[LATITUDE.sheetId], row[LONGITUDE.sheetId]]\n        },\n        properties: row\n      };\n    });\n    \n    experimentsData.features.push(...items);\n    this.map.getSource('experiments').setData(experimentsData);\n  }\n\n  // Fetch Local Article Data\n  const experimentsReq = new XMLHttpRequest();\n  experimentsReq.addEventListener('load',  () => { reqHandler('experiments', experimentsReq) });\n  console.log(process.env.REACT_APP_SHEET_URL);\n  experimentsReq.open('GET', process.env.REACT_APP_SHEET_URL);\n  experimentsReq.send();\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n// serviceWorker.unregister();\n"],"sourceRoot":""}