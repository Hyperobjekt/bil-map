* {
  margin: 0;
  padding: 0;
  word-wrap: break-word;
  /* TODO: should we? (UI) */
  user-select: none;
  cursor: default;
  font-family: sofia-pro, sans-serif;
  font-weight: 400;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
}

html, body, #root, .app, .map-container {
  height: 100%;
  width: 100%;
}

.trigger-icon {
  stroke: black;
  stroke-width: 3;
  cursor: pointer;
  fill: none;
}

.app {
  /* necessary to prevent dock from overflowing page on mobile */
  position: absolute;
  overflow: scroll;
}

/* MAP */
.map-container {
  position: fixed;
  top: 0;
  bottom: 0;
}

/* LEGEND */
.legend {
  position: fixed;
  top: 8px;
  right: 8px;
  background: #ffffffcc;
  padding: 8px;
  border-radius: 4px;
  font-size: 12px;
  text-transform: uppercase;
  box-shadow: rgba(0, 0, 0, 0.1) 3px 3px 5px;
}
.legend div {
  padding: 4px;
  font-weight: 300;
}

.legend i {
  width: 10px;
  height: 10px;
  display: inline-block;
  border-radius: 5px;
  margin-right: 8px;
}
.legend i.past {
  background: rgba(0,80,92,.8);
}
.legend i.ongoing {
  background: rgba(175,105,12,.8);
}
.legend i.proposed {
  background: rgba(223,70,73,.8);
}

.legend .trigger-icon {
  position: absolute;
  right: 5px;
  top: 5px;
  width: 16px;
  stroke-width: 5;
  /* user-select: none; */
}

.legend.hidden {
  background: transparent;
  box-shadow: none;
}
.legend.hidden .content {
  display: none;
}

/* TOOLTIP */
.tooltip {
  z-index: 10;
  background: white;
  /* overflows map with absolute */
  position: fixed;
  padding: 15px;
  max-width: 210px;
  box-shadow: rgba(0, 0, 0, 0.1) 3px 3px 5px;
  border-top: gray solid 8px;
  border-radius: 4px;
}

.tooltip.past {
  border-top-color: rgba(0,80,92,.8);
}
.tooltip.ongoing {
  border-top-color: rgba(175,105,12,.8);
}
.tooltip.proposed {
  border-top-color: rgba(223,70,73,.8);
}

.tooltip .detail {
  /* TODO: ? (UI) */
  font-size: 12px;
  padding-top: 5px;
}

.tooltip .name {
  font-weight: 700;
  font-size: 14px;
}

.tooltip .click-hint {
  font-size: 8px;
  padding-top: 5px;
  text-align: center;
}

.tooltip .location-title {
  padding-top: 8px;
  font-weight: 300;
  font-size: 9px;
  text-transform: uppercase;
}

.tooltip .hovered-location.emphasized {
  font-weight: 700;
}

$FS-card-width: 300px;
$FS-dock-width: $FS-card-width * 3;
$color-past: rgba(0,80,92,.8);
$color-ongoing: rgba(175,105,12,.8);
$color-proposed: rgba(223,70,73,.8);
$light-gray: #f7f7f7;

/*{ CARD DOCK */
.card-dock-container { //card-dock-wrapper
  // .trigger-icon { width: 4px }
  
  background-color: #eee;

  z-index: 5;
  position: absolute;
  /* dock background initially just off-screen, appears when user scrolls up */
  top: 100vh;
  width: 100%;
  box-shadow: rgba(0, 0, 0, 0.1) 0px 0px 10px 3px;
  // background: white;

  .user-hint {
    text-transform: uppercase;
    background: rgb(244, 253, 255);
    color: rgb(59, 123, 138);
    font-size: 16px; //FS
    .trigger-icon {
      stroke: rgb(59, 123, 138);
      stroke-width: 8; //FS
      width: 16px; //FS
    }
    
    &.scroll-hint {
      text-align: center;
      position: absolute;
      /* center hint above the cards - keep in sync with width */
      left: calc(50% - 100px);
      width: 200px; 
      top: -40px;
      height: 40px;
      animation: slide-up 1.2s forwards;
      &.dismissed {
        top: 100vh;
        transition: top ease 3s;
      }
      .content {
        padding: 12px;
      }
    }
    
    &.selection-hint {
      position: absolute;
      /* NOTE: keep in sync with .card-dock-wrapper .card-dock-container top */
      top: 100px;
      right: -230px;
      width: 230px;
      transition: right ease 2s;
      
      &.dismissed {
        right: -100vw;
      }
      .content {
        padding: 20px;
        svg {
          position: absolute;
          top: 44%;
          right: 20px;
        }
        .maximum {
          display: block;
        }
      }
    }
  }
  
  .card-dock { //card-dock-container
    height: 100%;

    // dock always takes up 3-card width (when screen ample size)
    width: $FS-dock-width;
    // card-table takes up the actual width of the cards
    &.card-count-1 .card-table {
      width: $FS-card-width * 1;
    }
    &.card-count-2 .card-table {
      width: $FS-card-width * 2;
    }
    &.card-count-3 .card-table {
      width: $FS-card-width * 3;
    }
    
    // the card-dock is centered (unmoved by card-count)
    margin-left: calc((100vw - #{$FS-dock-width}) / 2);
    @media screen and (max-width: $FS-dock-width) {
      // but don't allow it to overflow left side of screen
      margin-left: 0;
      // nor the empty portion of the dock to overflow the right
      width: 100%;
    }

    .card-table { //table.card-dock
      position: relative;
      /* top of card should stick up above window bottom */
      top: -100px; //FS
      // tough to mesh with card animation onto screen
      // box-shadow: rgba(0, 0, 0, 0.1) -2px -4px 10px 2px;

      // background: lightsalmon;

      .row {
        height: 100%; //?
        display: flex;
        // just so it appears above dismissed user-hints
        position: relative;
      }
      
      .card {
        max-width: $FS-card-width; //FS
        flex: 1 0 0;
        // height: 100%;
        display: inline-block;
        // vertical-align: top;

        animation: slide-up .8s forwards;
      }

      .cell {
        // don't add different side padding for different cell types
        // or cells won't align vertically
        padding: 10px; //FS
        // display: inline-block;
        // box-sizing: border-box;
        height: 100%; //?
        position: relative;
        .property-name .trigger-icon {
          position: absolute;
          width: 14px;
          right: 5px;
          top: 9px;
        }
        .property-name,
        .location-title {
          font-weight: 300;
          font-size: 12px;
          letter-spacing: 0.1em;
          text-transform: uppercase;
        }
        .location-title {
          padding-top: 3px;
          white-space: nowrap;
          text-overflow: ellipsis;
          overflow: hidden;
        }
        .location-cell-content:not(:last-child) {
          padding-bottom: 5px;
        }

        &.feature-header {
          .property-name {

            font-weight: 700;
            text-align: center;
          }
          .value {
            padding: 0;
          }
        }

        .value {
          // overflow: hidden;
          padding-top: 4px;
          font-size: 14px; //FS
          
          a {
            display: block;
            cursor: pointer;
            padding-bottom: 8px;
          }
        }

        &.expandible {
          max-height: 3000px;
          transition: max-height ease-in .2s;
          overflow: hidden;
          
          &:not(.expanded) {
            transition: max-height ease-out .2s;
            max-height: 75px !important;
            
            &:before {
              height: 20px;
            }        
          }
          // gradient text to fade unexpanded cellsqq
          &:before {
            content: '';
            width: 100%;
            height: 0px;    
            transition: height ease-in-out .3s;
            position: absolute;
            left: 0;
            bottom: 0;
            // appropriate color given with alternating row colors
          }
        }
        
      }

      // HEADER (NAME) STYLES
      .row.header {
        border-top-left-radius: 12px;
        border-top-right-radius: 12px;
        height: 100px;

        .card {
          border-top-width: 8px;
          border-top-style: solid;
          &.past {
            border-top-color: $color-past;
          }
          &.ongoing {
            border-top-color: $color-ongoing;
          }
          &.proposed {
            border-top-color: $color-proposed;
          }
          &:first-child {
            border-top-left-radius: 3px;
          }
          &:last-child {
            border-top-right-radius: 3px;
          }
          &:not(first-child) {
            // to compensate for border-left added to other cells
            // width: $FS-card-width + 1px;
          }
          
          .cell {
            padding-top: 20px; //FS
            // height: 100px;
            font-size: 14px; //FS
            line-height: 21px; //FS
            letter-spacing: 0.03em;
            word-wrap: break-word;
            /* so trigger has a positioned element to hang onto */
            position: relative;
            font-weight: 700;
            
            .remove-icon {
              position: absolute;
              width: 14px; //FS
              top: 6px; //FS
              right: 6px; //FS
            }
          }
        }
      }
      

    }
    
    /* alternating row colors */
    .row:nth-child(even) .card {
      background-color: $light-gray;
      .cell.expandible:not(.expanded):before {
        // appropriate color for text fade
        background: linear-gradient(transparent, $light-gray 15px);
      }
    } 
    .row:nth-child(odd) .card {
      background-color: white;
      .cell.expandible:not(.expanded):before {
        // appropriate color for text fade
        background: linear-gradient(transparent, white 15px);
      }
    }
    .row .card .cell {
      /* for a subtle division between cards 
         compensate headers with added 1px */
      // border-left: solid #f2f2f2 .5px;
      border: solid #eeeeee75 .5px;
    }
  }
}

@keyframes slide-right {
  from {
    transform: translate(-$FS-card-width);
    z-index: 1;
  }
  to {
    transform: translate(0);
    z-index: 2000;
  }
}
@keyframes slide-left {
  from {
    transform: translate(100vw);
  }
  to {
    transform: translate(0);
  }
}
@keyframes slide-up {
  from {
    transform: translate(0, 100vh);
  }
  to {
    transform: translate(0);
  }
}

@media (max-width: 2 * $FS-card-width) {
  /* LEGEND */
  .legend {
    position: fixed;
    top: 0;
    right: 0;
    width: 100%;
    padding: 0;
    background: white;
  }
  .legend .content {
    padding: 16px;
    font-size: 18px;
    letter-spacing: 0.1em;
  }
  .legend i {
    width: 14px;
    height: 14px;
    border-radius: 7px;
    margin-right: 14px;
  }
  .legend .trigger-icon {
    width: 25px;
    right: 10px;
    top: 10px;
  }

  /* DOCK */
  /* for smaller screens, don't "dock" */
  .card-dock-container {
    width: unset;
    min-width: 100vw;

    .user-hint{
      &.scroll-hint {
        left: calc(50vw - 100px);
      }
  
      &.selection-hint {
        height: 110px;
        top: 0;
        /* top: -110px; */
        left: calc(50vw - 148px);
        /* right: unset; */
        width: 286px;
        transition: top ease 0.8s;

        &.sole-hint {
          top: -110px;
          right: unset;

          &.dismissed {
            top: 100vh;
            /* right: calc(50% - 148px); */
          }
        }
      }
    }

    .card-dock {
      width: 100%;

      &.card-count-1 .card-table .card {
        // width: 100%;
        max-width: unset;
      }
      &.card-count-1 .card-table,
      &.card-count-2 .card-table,
      &.card-count-3 .card-table {
        width: 100%;
        .card {
          width: $FS-card-width;
        }
      }
    }
  }
}
